# PLURTECH API

## Model
Generated by Rails ERD. Run `rake erd` to regenerate (must have graphvis).
![](/erd.png)

TODO:
Users
- name
- email
- password
- salt
- facebook id
- snapchat username
- twitter
- instagram
- Last seen online

Messages
- from_user_id
- to_user_id
- message
- timestamp
- location
- images,etc

Friends

Last viewed message
 

$ rails new plurtech_api --api -T
$ rails g scaffold user name email username phone

TODO:

Some setup you must do manually if you haven't yet:

1. Ensure you have defined default url options in your environments files. Here
 is an example of default_url_options appropriate for a development environment
 in config/environments/development.rb:

   config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }

 In production, :host should be set to the actual host of your application.

2. Ensure you have defined root_url to *something* in your config/routes.rb.
 For example:

   root to: "home#index"

3. Ensure you have flash messages in app/views/layouts/application.html.erb.
 For example:

   <p class="notice"><%= notice %></p>
   <p class="alert"><%= alert %></p>

4. You can copy Devise views (for customization) to your app by running:

   rails g devise:views


## Configuration and System dependencies
- Ubuntu 16.04 LTS
- ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]
- Rails 5.2.0
- Graphviz (only for Development Environment)

## Database creation
```
$ rails db:migrate
$ rails db:seed
```

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

## Easy Development
- Shortcuts to SSH clients - https://askubuntu.com/questions/754450/shortcuts-to-ssh-clients

## Deployment instructions
- Setup Ruby On Rails on Ubuntu 16.04 - https://gorails.com/setup/ubuntu/16.04
- Installing Passenger + Nginx on Ubuntu 16.04 LTS - https://www.phusionpassenger.com/library/install/nginx/install/oss/xenial/
- Deploying a Ruby app on a Linux/Unix production server - https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/nginx/oss/xenial/deploy_app.html
- Deploying application updates - https://www.phusionpassenger.com/library/walkthroughs/deploy/ruby/ownserver/nginx/oss/deploy_updates.html

## Testing
```bash
# GET    /articles
$curl 0.0.0.0:3000

# POST   /articles
$curl -d '{"title":"test1", "content":"lorem"}' -H "Content-Type: application/json" -X POST http://0.0.0.0:3000/articles

# GET    /articles/:id
$curl 0.0.0.0:3000/articles/1

# PATCH  /articles/:id
$curl -d '{"title":"test5", "content":"lorem5"}' -H "Content-Type: application/json" -X PATCH http://0.0.0.0:3000/articles/5


# PUT    /articles/:id

# DELETE /articles/:id

# https://rubyplus.com/articles/4921-Rails-Forgery-Protection-Basics
# 
curl http://localhost:3000/users/new --cookie-jar "cookie.txt"

# after this command, you will see a authenticity_token, please remember it.

curl http://localhost:3000/users --request POST --cookie-jar "cookie.txt" --cookie "cookie.txt" --data-urlencode "authenticity_token=cOusCzjDwAt6ybUCAICCw9W4Fq9jwOr8Tys7qn8+Sa6F/Pj/d8WzgisX7U6xEUrSUqQSBvi1WpK4GdXUdMoPOA==" --data "user[name]=Foo" --data "user[email]=foobar@gmail.com" --data "user[username]=foobar" --data "user[phone]=123" 
```
